(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{683:function(e,t,n){var content=n(701);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(66).default)("240ab822",content,!0,{sourceMap:!1})},700:function(e,t,n){"use strict";n(683)},701:function(e,t,n){var r=n(65)(!1);r.push([e.i,".withdraw_panel[data-v-4b762ed5]{display:none;width:450px;min-height:280px;border:1px solid #94febf;border-radius:12px;margin-top:2px;font-family:sans-serif}.title[data-v-4b762ed5]{display:flex;justify-content:space-between;font-size:16px;text-align:left;color:#fff;margin-left:20px;margin-right:20px;margin-top:20px}.title span[data-v-4b762ed5]{font-size:12px;color:#94febf;-webkit-text-decoration:dashed underline;text-decoration:dashed underline}.title span[data-v-4b762ed5]:hover{cursor:pointer}.note_input[data-v-4b762ed5]{margin-top:10px}.note_input input[data-v-4b762ed5]{width:400px;height:40px;font-size:14px;border:1px solid #393939;border-radius:5px;background:#000403;color:#fff}.note_input input[data-v-4b762ed5]:hover{border:1px solid #fff}.note_input input[data-v-4b762ed5]:focus{border:1px solid #94febf}.recipient_address_input[data-v-4b762ed5]{margin-top:10px}.recipient_address_input input[data-v-4b762ed5]{width:400px;height:40px;font-size:14px;border:1px solid #393939;border-radius:5px;background:#000403;color:#fff}.recipient_address_input input[data-v-4b762ed5]:hover{border:1px solid #fff}.note_string_input_detail[data-v-4b762ed5]{text-align:left;margin-top:2px;margin-left:25px;margin-right:25px;color:#fff;font-size:10px}.note_string_input_detail div[data-v-4b762ed5]{display:flex;justify-content:space-between}.note_string_input_detail span[data-v-4b762ed5]{color:#94febf}.recipient_address_input_detail[data-v-4b762ed5]{text-align:left;margin-top:2px;margin-left:25px;margin-right:25px;color:#fff;font-size:10px}.recipient_address_input_detail div[data-v-4b762ed5]{display:flex;justify-content:space-between}.recipient_address_input_detail span[data-v-4b762ed5]{color:#94febf}.recipient_address_input_detail hr[data-v-4b762ed5]{color:red;border:1px solid #191919}.withdraw_submit[data-v-4b762ed5]{margin-top:20px;margin-bottom:20px;font-weight:bolder}.withdraw_submit button[data-v-4b762ed5]{background:#94febf;width:400px;height:40px;color:#000;border-radius:5px;font-weight:bolder;font-size:18px;border:1px solid #94febf}.withdraw_submit button[data-v-4b762ed5]:hover:enabled{background:#fefebf;cursor:pointer;color:#000}.withdraw_submit button[data-v-4b762ed5]:active:enabled{background:#0e2017;cursor:pointer;color:#94febf}.withdraw_submit button[data-v-4b762ed5]:disabled,.withdraw_submit button[data-v-4b762ed5]:hover:disabled{background:#343434;cursor:not-allowed}.withdraw_submit button[data-v-4b762ed5]:active:disabled{background:#202020;cursor:not-allowed;color:#000}",""]),e.exports=r},718:function(e,t,n){"use strict";n.r(t);var r=n(11),d=(n(45),n(21)),o=n(137),c={name:"withdraw",components:!0,data:function(){return{note_name:"Note",recipient_address_name:"Recipient Address",withdraw_button_name:"Withdraw",noteStringInputType:0,nodeStringInputErrorMsg:"",currencyValue:"",amountValue:0,timePassedValue:0,subsequentDepositsValue:0,recipientAddressInputType:0,recipientAddressInputErrorMsg:"",gasPriceValue:0,networkFeeValue:0,relayerFeeValue:0,totalFeeValue:0,tokenToReceiveValue:0,useRelayer:!0}},mounted:function(){document.getElementById("withdrawId").disabled=!0,setInterval(Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.store.updateStatusOfUpdaterArray();case 2:e.sent&&d.a.$emit("updateRecipientsTable");case 4:case"end":return e.stop()}}),e)}))),2e3)},methods:{onDonate:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.getElementById("recipient_address").value=e.$store.state.donation_eth,t.next=3,e.onRecipientAddressInput();case 3:case"end":return t.stop()}}),t)})))()},onNoteInput:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,d,c,l,v,_,f,w,m,h,x;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$store.getLock){t.next=2;break}return t.abrupt("return");case 2:if(n=document.getElementById("note").value,r=e.$store.state.netId,0!==n.length){t.next=9;break}e.noteStringInputType=0,e.recipientAddressInputType=0,t.next=48;break;case 9:if(t.prev=9,d=window.shieldParseNote(n),c=d.currency,l=d.amount,v=d.netId,_=d.deposit,v===r){t.next=14;break}throw console.log("netId=",v," curNetId=",r),new Error("network not equal");case 14:if(f=[],!window.shieldIsDepositEventSubscribed({type:"deposit",currency:c,amount:l,netId:v})){t.next=19;break}f=window.shieldGetCachedEvents({type:"deposit",currency:c,amount:l,netId:v}),t.next=22;break;case 19:return t.next=21,window.shieldFetchEvents("deposit",c,l);case 21:f=t.sent;case 22:if(w=null,!(m=window.store.getObj({netId:v,noteString:n}))){t.next=28;break}w=m.timestamp,t.next=32;break;case 28:if(h=window.store.getEvent(_,f)){t.next=31;break}throw new Error("deposit Note is not found");case 31:w=h.timestamp;case 32:return e.currencyValue=c,e.amountValue=l,t.next=36,o.a.time();case 36:x=t.sent,e.timePassedValue=o.a.timeDiffStr(w,x),e.subsequentDepositsValue=window.store.getSubsequentDeposits(w,f),e.noteStringInputType=2,e.onRecipientAddressInput(),t.next=48;break;case 43:t.prev=43,t.t0=t.catch(9),e.noteStringInputType=1,e.recipientAddressInputType=0,e.nodeStringInputErrorMsg="Invalid note: "+t.t0.message;case 48:e.updateWithdrawButtonStyle();case 49:case"end":return t.stop()}}),t,null,[[9,43]])})))()},onRecipientAddressInput:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,address,d,o,c,l,v,_,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$store.getLock){t.next=2;break}return t.abrupt("return");case 2:if(n=e.$store.state.netId,r=document.getElementById("note").value,(address=document.getElementById("recipient_address").value)&&0!==address.length&&2===e.noteStringInputType){t.next=9;break}e.recipientAddressInputType=0,t.next=37;break;case 9:if(!window.shieldCheckAddress({netId:n,address:address})){t.next=35;break}return t.prev=10,t.next=13,window.shieldGetFeeInfo({noteString:r});case 13:d=t.sent,o=d.fee,c=d.gasFee,l=d.feePercent,v=d.gasPrices,_=d.amount,f=d.useRelayer,e.gasPriceValue=v,e.networkFeeValue=c,e.relayerFeeValue=l,e.totalFeeValue=o,e.tokenToReceiveValue=_,e.useRelayer=f,e.recipientAddressInputType=2,t.next=33;break;case 29:t.prev=29,t.t0=t.catch(10),e.recipientAddressInputErrorMsg=t.t0.message,e.recipientAddressInputType=0;case 33:t.next=37;break;case 35:e.recipientAddressInputType=1,e.recipientAddressInputErrorMsg="Invalid recipient address";case 37:e.updateWithdrawButtonStyle();case 38:case"end":return t.stop()}}),t,null,[[10,29]])})))()},clear:function(){this.recipientAddressInputType=0,this.noteStringInputType=0,document.getElementById("note").value="",document.getElementById("recipient_address").value="",this.updateWithdrawButtonStyle()},updateWithdrawButtonStyle:function(){2==this.recipientAddressInputType&&2==this.noteStringInputType?document.getElementById("withdrawId").disabled=!1:document.getElementById("withdrawId").disabled=!0},withdrawAction:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,l,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=document.getElementById("note").value,r=document.getElementById("recipient_address").value,console.log("withdraw noteString=",n," recipientAddress=",r),e.clear(),d.a.$emit("EnableHideSpinner"),t.prev=5,console.log("useRelayer=",e.useRelayer),t.next=9,window.shieldWithdraw(n,r,e.useRelayer);case 9:o=t.sent,c=o.txHash,l=o.jobURL,v=e.$store.state.netId,e.useRelayer?(console.log("jobURL=",l),window.store.updateStatus({netId:v,noteString:n,status:"QUEUED",txHash:c,jobURL:l})):window.store.updateStatus({netId:v,noteString:n,status:"CONFIRMED",txHash:c,jobURL:l}),d.a.$emit("updateRecipientsTable"),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(5),d.a.$emit("show_status_dialog","Error",t.t0.message);case 20:d.a.$emit("DisableHideSpinner");case 21:case"end":return t.stop()}}),t,null,[[5,17]])})))()}}},l=(n(700),n(24)),component=Object(l.a)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"withdraw_panel"},[t("div",{staticClass:"title"},[t("p",[e._v(e._s(e.note_name))])]),e._v(" "),t("div",{staticClass:"note_input"},[t("input",{attrs:{type:"text",id:"note",placeholder:"Please enter your note",autocomplete:"off"},on:{input:e.onNoteInput}})]),e._v(" "),t("div",[0===e.noteStringInputType?t("div"):1===e.noteStringInputType?t("div",{staticClass:"note_string_input_detail"},[t("span",[e._v(e._s(e.nodeStringInputErrorMsg))])]):t("div",{staticClass:"note_string_input_detail"},[t("div",[t("label",[e._v("Currency")]),e._v(" "),t("span",[e._v(e._s(e.currencyValue))])]),e._v(" "),t("div",[t("label",[e._v("Amount")]),e._v(" "),t("span",[e._v(e._s(e.amountValue))])]),e._v(" "),t("div",[t("label",[e._v("Time passed")]),e._v(" "),t("span",[e._v(e._s(e.timePassedValue))])]),e._v(" "),t("div",[t("label",[e._v("Subsequent deposits")]),e._v(" "),t("span",[e._v(e._s(e.subsequentDepositsValue))])])])]),e._v(" "),t("div",{staticClass:"title"},[t("p",[e._v(e._s(e.recipient_address_name))]),e._v(" "),t("span",{on:{click:e.onDonate}},[e._v("Donate")])]),e._v(" "),t("div",{staticClass:"recipient_address_input"},[t("input",{attrs:{type:"text",id:"recipient_address",placeholder:"Please paste address here",autocomplete:"off"},on:{input:e.onRecipientAddressInput}})]),e._v(" "),t("div",[0===e.recipientAddressInputType?t("div"):1===e.recipientAddressInputType?t("div",{staticClass:"recipient_address_input_detail"},[t("span",[e._v(e._s(e.recipientAddressInputErrorMsg))])]):t("div",{staticClass:"recipient_address_input_detail"},[t("div",[t("label",[e._v("Gas Price")]),e._v(" "),t("span",[e._v(e._s(e.gasPriceValue))])]),e._v(" "),t("div",[t("label",[e._v("Network fee")]),e._v(" "),t("span",[e._v(e._s(e.networkFeeValue))])]),e._v(" "),t("div",[t("label",[e._v("Relayer fee")]),e._v(" "),t("span",[e._v(e._s(e.relayerFeeValue))])]),e._v(" "),t("div",[t("label",[e._v("Total fee")]),e._v(" "),t("span",[e._v(e._s(e.totalFeeValue))])]),e._v(" "),t("hr"),e._v(" "),t("div",[t("label",[e._v("Tokens to receive")]),e._v(" "),t("span",[e._v(e._s(e.tokenToReceiveValue))])])])]),e._v(" "),t("div",{staticClass:"withdraw_submit"},[t("button",{attrs:{id:"withdrawId"},on:{click:e.withdrawAction}},[e._v("\n      "+e._s(e.withdraw_button_name)+"\n    ")])])])}),[],!1,null,"4b762ed5",null);t.default=component.exports}}]);